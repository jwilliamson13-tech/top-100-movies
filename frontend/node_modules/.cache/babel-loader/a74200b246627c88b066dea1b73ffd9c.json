{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Josh\\\\Desktop\\\\top-100-movies\\\\top-100-movies\\\\frontend\\\\src\\\\components\\\\movies.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext, useCallback } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport MovieCard from \"../components/movieCard\";\nimport MoviesDataService from \"../services/dataService\";\nimport { UserContext } from \"../context/UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Movies = props => {\n  _s();\n\n  const [userContext, setUserContext] = useContext(UserContext);\n  const [movies, setMovies] = useState([]);\n  const [searchName, setSearchName] = useState(\"\"); //Should segment this but I'm doing this for now.\n\n  const fetchUserDetails = useCallback(() => {\n    fetch(process.env.REACT_APP_API_ENDPOINT + \"users/user\", {\n      method: \"GET\",\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${userContext.token}`\n      }\n    }).then(async response => {\n      if (response.ok) {\n        const data = await response.json();\n        setUserContext(oldUserValues => {\n          return { ...oldUserValues,\n            details: data\n          };\n        });\n      } else {\n        if (response.status === 401) {\n          console.log(\"RIP\"); //window.location.reload()\n        } else {\n          setUserContext(oldUserValues => {\n            return { ...oldUserValues,\n              details: null\n            };\n          });\n        }\n      }\n    });\n  }, [setUserContext, userContext.token]);\n  var userMoviesArray;\n  useEffect(() => {\n    console.log(!userContext.details);\n\n    if (!userContext.details) {\n      console.log(\"Getting User Details\");\n      fetchUserDetails();\n    }\n\n    console.log(userContext);\n  }, [userContext.details, fetchUserDetails]);\n\n  const onChangeSearchName = e => {\n    const searchName = e.target.value;\n    setSearchName(searchName);\n  };\n\n  const retrieveMovies = searchName => {\n    console.log(searchName);\n    MoviesDataService.getMovies(searchName).then(response => {\n      if (Object.entries(userContext.details.favorite_movies).length < 1) {\n        userMoviesArray = false;\n      } else {\n        userMoviesArray = Object.entries(userContext.details.favorite_movies);\n      }\n\n      setMovies(response.data.data.results); //Gonna have to change this to match data received\n    });\n  }; //Write a function to compare movies ID\n\n\n  function areSameMovie(firstMovie, secondMovie) {\n    if (firstMovie.id == secondMovie.id) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container pr-5 pl-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-center\",\n      children: \"Search for Movies\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row pb-1\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group col-lg-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          placeholder: \"Search by name\",\n          value: searchName,\n          onChange: onChangeSearchName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group-append\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-outline-secondary\",\n            type: \"button\",\n            onClick: () => retrieveMovies(searchName) //Need to add on click event and state event here\n            ,\n            children: \"Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row pt-3 pb-3 justify-content-center\",\n      children: movies.map(currentMovie => {\n        var movieImage = currentMovie.poster_path ? \"https://image.tmdb.org/t/p/w185/\" + currentMovie.poster_path : \"./NoMovieImage.jpg\";\n        var movieAlreadyAdded;\n        console.log(\"USER MOVIES ARRAY:\", userMoviesArray); //Determine if movie is already added\n\n        if (!userMoviesArray) {\n          movieAlreadyAdded = false;\n        } else {\n          //movieAlreadyAdded = false;\n          console.log(userMoviesArray);\n\n          for (var i = 0; i < userMoviesArray.length; i++) {\n            if (areSameMovie(currentMovie, userMoviesArray[i][1])) {\n              movieAlreadyAdded = true;\n              break;\n            } else {\n              movieAlreadyAdded = false;\n            }\n          }\n          /*\r\n          console.log(currentMovie);\r\n          //console.log(userContext.details.favorite_movies);\r\n          console.log(Array.from(Object.entries(userContext.details.favorite_movies)));\r\n          movieAlreadyAdded = Array.from(Object.entries(userContext.details.favorite_movies)).includes(currentMovie);\r\n          */\n\n        }\n\n        return /*#__PURE__*/_jsxDEV(MovieCard, {\n          movie: {\n            currentMovie,\n            \"image\": movieImage,\n            \"movieAlreadyAdded\": movieAlreadyAdded\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 17\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n}; //{movies.map((movies) =>{\n//<MovieCard movie={{\"name\":\"Mean Girls\",\"description\":\"Girls are mean. I don't know what you expected.\",\"image\":\"https://image.tmdb.org/t/p/w185/fXm3YKXAEjx7d2tIWDg9TfRZtsU.jpg\"}}/>\n//<MovieCard movie={{\"name\":\"Toy Story\",\"description\":\"Toys do some crazy shit on this wild ass adventure. Be prepared to be scared because the neighbor kid is batshit, and you'll think your own toys may come to life to kill you one day. Pick up your phobia of dolls and toys with eyes now!!!\",\"image\":\"https://image.tmdb.org/t/p/w185/uXDfjJbdP4ijW5hWSBrPrlKpxab.jpg\"}}/>\n//<MovieCard movie={{\"name\":\"Mean Girls\",\"description\":\"Girls are mean. I don't know what you expected.\",\"image\":\"https://image.tmdb.org/t/p/w185/xj3jhyq3ZsfdVn79kXC1XKFVQlv.jpg\"}}/>\n//}};\n\n\n_s(Movies, \"xoycyMNjOf6HGLJd6XMqoFwK/lE=\");\n\n_c = Movies;\nexport default Movies;\n\nvar _c;\n\n$RefreshReg$(_c, \"Movies\");","map":{"version":3,"sources":["C:/Users/Josh/Desktop/top-100-movies/top-100-movies/frontend/src/components/movies.js"],"names":["React","useState","useEffect","useContext","useCallback","Link","MovieCard","MoviesDataService","UserContext","Movies","props","userContext","setUserContext","movies","setMovies","searchName","setSearchName","fetchUserDetails","fetch","process","env","REACT_APP_API_ENDPOINT","method","credentials","headers","Authorization","token","then","response","ok","data","json","oldUserValues","details","status","console","log","userMoviesArray","onChangeSearchName","e","target","value","retrieveMovies","getMovies","Object","entries","favorite_movies","length","results","areSameMovie","firstMovie","secondMovie","id","map","currentMovie","movieImage","poster_path","movieAlreadyAdded","i"],"mappings":"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","sourcesContent":["import React, { useState,useEffect, useContext, useCallback } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport MovieCard from \"../components/movieCard\";\r\nimport MoviesDataService from \"../services/dataService\";\r\nimport { UserContext } from \"../context/UserContext\";\r\n\r\nconst Movies = props => {\r\n  const [userContext, setUserContext] = useContext(UserContext);\r\n  const [movies, setMovies] = useState([]);\r\n  const [searchName, setSearchName ] = useState(\"\");\r\n\r\n  //Should segment this but I'm doing this for now.\r\n  const fetchUserDetails = useCallback(() => {\r\n    fetch(process.env.REACT_APP_API_ENDPOINT +\"users/user\", {\r\n      method:\"GET\",\r\n      credentials:\"include\",\r\n      headers: {\r\n        \"Content-Type\":\"application/json\",\r\n        Authorization: `Bearer ${userContext.token}`\r\n      }\r\n    })\r\n    .then(async response =>{\r\n      if(response.ok){\r\n        const data = await response.json();\r\n        setUserContext(oldUserValues => {\r\n          return {...oldUserValues, details:data};\r\n        });\r\n      }\r\n      else{\r\n        if(response.status === 401){\r\n          console.log(\"RIP\");\r\n          //window.location.reload()\r\n        }\r\n        else{\r\n          setUserContext(oldUserValues => {\r\n            return {...oldUserValues, details:null};\r\n          });\r\n        }\r\n      }\r\n    })\r\n  }, [setUserContext, userContext.token]);\r\n\r\n  var userMoviesArray;\r\n\r\n  useEffect(()=>{\r\n    console.log(!userContext.details);\r\n      if (!userContext.details) {\r\n        console.log(\"Getting User Details\");\r\n        fetchUserDetails();\r\n      }\r\n      console.log(userContext);\r\n    }, [userContext.details, fetchUserDetails]);\r\n\r\n\r\n\r\n\r\n  const onChangeSearchName = e => {\r\n      const searchName = e.target.value;\r\n      setSearchName(searchName);\r\n  };\r\n\r\n  const retrieveMovies = (searchName) => {\r\n      console.log(searchName);\r\n      MoviesDataService.getMovies(searchName)\r\n      .then(response => {\r\n        if(Object.entries(userContext.details.favorite_movies).length < 1){\r\n          userMoviesArray = false;\r\n        }\r\n        else{\r\n          userMoviesArray = Object.entries(userContext.details.favorite_movies);\r\n        }\r\n        setMovies(response.data.data.results); //Gonna have to change this to match data received\r\n      })\r\n    };\r\n\r\n    //Write a function to compare movies ID\r\n    function areSameMovie(firstMovie, secondMovie){\r\n      if(firstMovie.id == secondMovie.id){\r\n        return true;\r\n      }\r\n      else{\r\n        return false;\r\n      }\r\n    }\r\n\r\n\r\n  return (\r\n    <div className=\"container pr-5 pl-5\">\r\n      <h1 className=\"text-center\">Search for Movies</h1>\r\n      <div className=\"row pb-1\">\r\n        <div className=\"input-group col-lg-4\">\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            placeholder=\"Search by name\"\r\n            value={searchName}\r\n            onChange={onChangeSearchName}\r\n          />\r\n          <div className=\"input-group-append\">\r\n            <button\r\n              className=\"btn btn-outline-secondary\"\r\n              type=\"button\"\r\n              onClick={() => retrieveMovies(searchName)}\r\n              //Need to add on click event and state event here\r\n            >\r\n              Search\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"row pt-3 pb-3 justify-content-center\">\r\n          {\r\n            movies.map(currentMovie => {\r\n              var movieImage = currentMovie.poster_path ? \"https://image.tmdb.org/t/p/w185/\" + currentMovie.poster_path : \"./NoMovieImage.jpg\"\r\n              var movieAlreadyAdded;\r\n              console.log(\"USER MOVIES ARRAY:\", userMoviesArray);\r\n              //Determine if movie is already added\r\n              if(!userMoviesArray){\r\n                movieAlreadyAdded = false;\r\n              }\r\n              else{\r\n                //movieAlreadyAdded = false;\r\n                console.log(userMoviesArray);\r\n                for(var i = 0; i < userMoviesArray.length; i++){\r\n                  if(areSameMovie(currentMovie,userMoviesArray[i][1])){\r\n                    movieAlreadyAdded = true;\r\n                    break;\r\n                  }\r\n                  else{\r\n                    movieAlreadyAdded = false;\r\n                  }\r\n                }\r\n                /*\r\n                console.log(currentMovie);\r\n                //console.log(userContext.details.favorite_movies);\r\n                console.log(Array.from(Object.entries(userContext.details.favorite_movies)));\r\n                movieAlreadyAdded = Array.from(Object.entries(userContext.details.favorite_movies)).includes(currentMovie);\r\n                */\r\n              }\r\n\r\n              return(\r\n                <MovieCard movie={{currentMovie,\"image\":movieImage,\"movieAlreadyAdded\":movieAlreadyAdded}}/>\r\n              )\r\n            })\r\n          }\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n//{movies.map((movies) =>{\r\n//<MovieCard movie={{\"name\":\"Mean Girls\",\"description\":\"Girls are mean. I don't know what you expected.\",\"image\":\"https://image.tmdb.org/t/p/w185/fXm3YKXAEjx7d2tIWDg9TfRZtsU.jpg\"}}/>\r\n//<MovieCard movie={{\"name\":\"Toy Story\",\"description\":\"Toys do some crazy shit on this wild ass adventure. Be prepared to be scared because the neighbor kid is batshit, and you'll think your own toys may come to life to kill you one day. Pick up your phobia of dolls and toys with eyes now!!!\",\"image\":\"https://image.tmdb.org/t/p/w185/uXDfjJbdP4ijW5hWSBrPrlKpxab.jpg\"}}/>\r\n//<MovieCard movie={{\"name\":\"Mean Girls\",\"description\":\"Girls are mean. I don't know what you expected.\",\"image\":\"https://image.tmdb.org/t/p/w185/xj3jhyq3ZsfdVn79kXC1XKFVQlv.jpg\"}}/>\r\n//}};\r\nexport default Movies;\r\n"]},"metadata":{},"sourceType":"module"}