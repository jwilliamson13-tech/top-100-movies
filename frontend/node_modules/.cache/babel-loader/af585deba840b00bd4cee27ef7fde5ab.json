{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Josh\\\\Desktop\\\\top-100-movies\\\\top-100-movies\\\\frontend\\\\src\\\\components\\\\logout.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport AuthDataService from \"../services/authService\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport { UserContext } from \"../context/UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Logout = () => {\n  _s();\n\n  const history = useHistory();\n  const [userContext, setUserContext] = useContext(UserContext);\n\n  const logoutHandler = () => {\n    fetch(\"http://localhost:3000/users/logout\", {\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application-json\",\n        Authorization: `Bearer ${userContext.token}`\n      }\n    }).then(async response => {\n      setUserContext(oldUserValues => {\n        return { ...oldUserValues,\n          details: undefined,\n          token: null\n        };\n      });\n      history.push(\"/\");\n    });\n  };\n\n  useEffect(() => {\n    logoutHandler();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"LOGOUT\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Logout, \"tq4ZgHnvz0zNrXG8m/DoHadt4R0=\", false, function () {\n  return [useHistory];\n});\n\n_c = Logout;\nexport default Logout;\n\nvar _c;\n\n$RefreshReg$(_c, \"Logout\");","map":{"version":3,"sources":["C:/Users/Josh/Desktop/top-100-movies/top-100-movies/frontend/src/components/logout.js"],"names":["React","useState","useEffect","useContext","Link","useHistory","AuthDataService","useAuth0","UserContext","Logout","history","userContext","setUserContext","logoutHandler","fetch","credentials","headers","Authorization","token","then","response","oldUserValues","details","undefined","push"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAAyBC,SAAzB,EAAoCC,UAApC,QAAsD,OAAtD;AACA,SAASC,IAAT,EAAeC,UAAf,QAAiC,kBAAjC;AACA,OAAOC,eAAP,MAA4B,yBAA5B;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,SAASC,WAAT,QAA4B,wBAA5B;;;AAEA,MAAMC,MAAM,GAAG,MAAM;AAAA;;AAEnB,QAAMC,OAAO,GAAGL,UAAU,EAA1B;AAEA,QAAM,CAACM,WAAD,EAAcC,cAAd,IAAgCT,UAAU,CAACK,WAAD,CAAhD;;AAEA,QAAMK,aAAa,GAAG,MAAM;AAC1BC,IAAAA,KAAK,CAAC,oCAAD,EAAuC;AAC1CC,MAAAA,WAAW,EAAE,SAD6B;AAE1CC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEPC,QAAAA,aAAa,EAAG,UAASN,WAAW,CAACO,KAAM;AAFpC;AAFiC,KAAvC,CAAL,CAOCC,IAPD,CAOM,MAAMC,QAAN,IAAkB;AACtBR,MAAAA,cAAc,CAACS,aAAa,IAAI;AAC9B,eAAO,EAAC,GAAGA,aAAJ;AAAmBC,UAAAA,OAAO,EAAEC,SAA5B;AAAuCL,UAAAA,KAAK,EAAE;AAA9C,SAAP;AACD,OAFa,CAAd;AAGAR,MAAAA,OAAO,CAACc,IAAR,CAAa,GAAb;AACD,KAZD;AAaD,GAdD;;AAgBAtB,EAAAA,SAAS,CAAC,MAAI;AACZW,IAAAA,aAAa;AACd,GAFQ,EAEN,EAFM,CAAT;AAIA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAMD,CAhCD;;GAAMJ,M;UAEYJ,U;;;KAFZI,M;AAkCN,eAAeA,MAAf","sourcesContent":["import React, { useState,useEffect, useContext } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport AuthDataService from \"../services/authService\";\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport { UserContext } from \"../context/UserContext\";\r\n\r\nconst Logout = () => {\r\n\r\n  const history = useHistory();\r\n\r\n  const [userContext, setUserContext] = useContext(UserContext);\r\n\r\n  const logoutHandler = () => {\r\n    fetch(\"http://localhost:3000/users/logout\", {\r\n      credentials: \"include\",\r\n      headers: {\r\n        \"Content-Type\": \"application-json\",\r\n        Authorization: `Bearer ${userContext.token}`\r\n      }\r\n    })\r\n    .then(async response => {\r\n      setUserContext(oldUserValues => {\r\n        return {...oldUserValues, details: undefined, token: null};\r\n      });\r\n      history.push(\"/\");\r\n    })\r\n  }\r\n\r\n  useEffect(()=>{\r\n    logoutHandler();\r\n  }, []);\r\n\r\n  return(\r\n    <div>\r\n      LOGOUT\r\n    </div>\r\n  )\r\n\r\n};\r\n\r\nexport default Logout;\r\n"]},"metadata":{},"sourceType":"module"}