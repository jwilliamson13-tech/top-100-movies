{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Josh\\\\Desktop\\\\top-100-movies\\\\top-100-movies\\\\frontend\\\\src\\\\components\\\\register.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport AuthDataService from \"../services/authService\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport { UserContext } from \"../context/UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Register = () => {\n  _s();\n\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [password2, setPassword2] = useState(\"\");\n  const [userContext, setUserContext] = useContext(UserContext);\n\n  const formSubmitHandler = e => {\n    e.preventDefault();\n    setIsSubmitting(true);\n    setError(\"\");\n    const errorMessage = \"Something went wrong! Please try again later.\";\n    fetch(\"http://localhost:3000/users\", {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email: email,\n        password: password,\n        password2: password2\n      })\n    }).then(async response => {\n      if (!response.ok) {\n        if (response.status === 400) {\n          setError(\"Please fill all the fields correctly!\");\n        } else if (response.status === 401) {\n          setError(\"Invalid email and password combination.\");\n        } else if (response.status === 500) {\n          console.error(\"Error registering user: \", response);\n          const data = await response.json();\n\n          if (data.message) {\n            setError(data.message || errorMessage);\n          }\n        } else {\n          setError(errorMessage);\n        }\n      } else {\n        const data = await response.json();\n        setUserContext(oldUserValues => {\n          return { ...oldUserValues,\n            token: data.token\n          };\n        });\n      }\n    }).catch(e => {\n      setIsSubmitting(false);\n      setError(errorMessage);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container pr-5 pl-5\",\n    children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"\",\n      onSubmit: formSubmitHandler,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        label: \"Email\",\n        labelFor: \"email\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"email\",\n          placeholder: \"Email\",\n          type: \"email\",\n          value: email,\n          onChange: e => setEmail(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        label: \"Password\",\n        labelFor: \"password\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"password\",\n          placeholder: \"Password\",\n          type: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        label: \"Password2\",\n        labelFor: \"password2\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"password2\",\n          placeholder: \"Confirm Password\",\n          type: \"password\",\n          value: password2,\n          onChange: e => setPassword2(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        class: \"btn-primary\",\n        type: \"submit\",\n        disabled: isSubmitting,\n        children: `${isSubmitting ? \"Registering\" : \"Register\"}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Register, \"EoeFiGiDYEQjwNzdO7w7RDKtwNI=\");\n\n_c = Register;\nexport default Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["C:/Users/Josh/Desktop/top-100-movies/top-100-movies/frontend/src/components/register.js"],"names":["React","useState","useEffect","useContext","Link","AuthDataService","useAuth0","UserContext","Register","isSubmitting","setIsSubmitting","error","setError","email","setEmail","password","setPassword","password2","setPassword2","userContext","setUserContext","formSubmitHandler","e","preventDefault","errorMessage","fetch","method","credentials","headers","body","JSON","stringify","then","response","ok","status","console","data","json","message","oldUserValues","token","catch","target","value"],"mappings":"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","sourcesContent":["import React, { useState,useEffect, useContext } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport AuthDataService from \"../services/authService\";\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport { UserContext } from \"../context/UserContext\";\r\n\r\n\r\n\r\nconst Register = () => {\r\n  const[isSubmitting, setIsSubmitting] = useState(false);\r\n  const[error,setError] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [password2, setPassword2] = useState(\"\");\r\n  const [userContext, setUserContext] = useContext(UserContext);\r\n\r\n\r\n  const formSubmitHandler = e => {\r\n    e.preventDefault();\r\n    setIsSubmitting(true);\r\n    setError(\"\");\r\n\r\n    const errorMessage = \"Something went wrong! Please try again later.\";\r\n\r\n    fetch(\"http://localhost:3000/users\", {\r\n      method: \"POST\",\r\n      credentials: \"include\",\r\n      headers:{\"Content-Type\":\"application/json\"},\r\n      body: JSON.stringify({email:email,password:password,password2:password2})\r\n    })\r\n    .then(async response => {\r\n      if(!response.ok){\r\n        if(response.status === 400){\r\n          setError(\"Please fill all the fields correctly!\");\r\n        }\r\n        else if(response.status === 401) {\r\n          setError(\"Invalid email and password combination.\");\r\n        }\r\n        else if(response.status === 500){\r\n          console.error(\"Error registering user: \", response);\r\n          const data = await response.json();\r\n          if(data.message) {\r\n            setError(data.message || errorMessage);\r\n          }\r\n        }\r\n        else{\r\n          setError(errorMessage);\r\n        }\r\n      }\r\n      else{\r\n        const data = await response.json();\r\n        setUserContext(oldUserValues => {\r\n          return {...oldUserValues, token:data.token};\r\n        });\r\n      }\r\n    })\r\n    .catch(e => {\r\n      setIsSubmitting(false);\r\n      setError(errorMessage);\r\n    })\r\n  }\r\n\r\n  return(\r\n    <div className=\"container pr-5 pl-5\">\r\n    {error && <div className=\"alert alert-danger\">{error}</div>}\r\n      <form className=\"\" onSubmit={formSubmitHandler}>\r\n        <div className=\"form-group\" label=\"Email\" labelFor=\"email\">\r\n          <input\r\n            id=\"email\"\r\n            placeholder=\"Email\"\r\n            type=\"email\"\r\n            value={email}\r\n            onChange={e => setEmail(e.target.value)}\r\n          />\r\n        </div>\r\n        <br/>\r\n        <div className=\"form-group\" label=\"Password\" labelFor=\"password\">\r\n          <input\r\n            id=\"password\"\r\n            placeholder=\"Password\"\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={e => setPassword(e.target.value)}\r\n          />\r\n        </div>\r\n        <br/>\r\n        <div className=\"form-group\" label=\"Password2\" labelFor=\"password2\">\r\n          <input\r\n            id=\"password2\"\r\n            placeholder=\"Confirm Password\"\r\n            type=\"password\"\r\n            value={password2}\r\n            onChange={e => setPassword2(e.target.value)}\r\n          />\r\n        </div>\r\n        <button class=\"btn-primary\" type=\"submit\" disabled={isSubmitting}>{`${isSubmitting ? \"Registering\" : \"Register\"}`}</button>\r\n      </form>\r\n    </div>\r\n  )\r\n\r\n};\r\n\r\nexport default Register;\r\n"]},"metadata":{},"sourceType":"module"}