{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Josh\\\\Desktop\\\\top-100-movies\\\\top-100-movies\\\\frontend\\\\src\\\\components\\\\login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport AuthDataService from \"../services/authService\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport { UserContext } from \"../context/UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const history = useHistory();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [userContext, setUserContext] = useContext(UserContext);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const formSubmitHandler = e => {\n    e.preventDefault();\n    setIsSubmitting(true);\n    setError(\"\");\n    const errorMessage = \"Something went wrong! Please try again later.\";\n    fetch(process.env.REACT_APP_API_ENDPOINT + \"/users/login\", {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email: email,\n        password: password\n      })\n    }).then(async response => {\n      setIsSubmitting(false);\n\n      if (!response.ok) {\n        if (response.status === 400) {\n          setError(\"Please fill out all fields correctly.\");\n        } else if (response.status === 401) {\n          setError(\"Invalid email and/or password combination\");\n        } else {\n          setError(errorMessage);\n        }\n      } else {\n        const data = await response.json();\n        setUserContext(oldUserValues => {\n          return { ...oldUserValues,\n            token: data.token\n          };\n        });\n        history.push(\"/movies\");\n        console.log(userContext);\n      }\n    }).catch(e => {\n      setIsSubmitting(false);\n      setError(errorMessage);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid pt-5 pb-5 pr-5 pl-5\",\n    children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row d-flex justify-content-center align-items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-6\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"img-fluid\",\n          src: \"https://images.unsplash.com/photo-1517604931442-7e0c8ed2963c?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1050&q=80\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-6 justify-content-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-center pb-3\",\n          children: \"Please turn off your cell phone...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"\",\n          onSubmit: formSubmitHandler,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control mb-4\",\n            id: \"email\",\n            placeholder: \"Email\",\n            type: \"email\",\n            value: email,\n            onChange: e => setEmail(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control mb-4\",\n            id: \"password\",\n            placeholder: \"Password\",\n            type: \"password\",\n            value: password,\n            onChange: e => setPassword(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary btn-lg\",\n            type: \"submit\",\n            disabled: isSubmitting,\n            children: `${isSubmitting ? \"Logging In\" : \"Login\"}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-center pb-3\",\n          children: \"... unless that's what you're using to view this page!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"small fw-bold mt-2 pt-1 mb-0\",\n          children: [\"Don't have an account? \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/register\",\n            className: \"link-danger\",\n            children: \"Register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 83\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"dB0ClM5TaSWdbhrW5LLW/ziFui0=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/Josh/Desktop/top-100-movies/top-100-movies/frontend/src/components/login.js"],"names":["React","useContext","useState","useEffect","Link","useHistory","AuthDataService","useAuth0","UserContext","Login","history","email","setEmail","password","setPassword","error","setError","userContext","setUserContext","isSubmitting","setIsSubmitting","formSubmitHandler","e","preventDefault","errorMessage","fetch","process","env","REACT_APP_API_ENDPOINT","method","credentials","headers","body","JSON","stringify","then","response","ok","status","data","json","oldUserValues","token","push","console","log","catch","target","value"],"mappings":"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","sourcesContent":["import React, { useContext, useState,useEffect } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport AuthDataService from \"../services/authService\";\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport { UserContext } from \"../context/UserContext\";\r\n\r\n\r\n\r\nconst Login = () => {\r\n\r\n  const history = useHistory();\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [userContext, setUserContext] = useContext(UserContext);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const formSubmitHandler = e => {\r\n    e.preventDefault();\r\n    setIsSubmitting(true);\r\n    setError(\"\");\r\n\r\n    const errorMessage = \"Something went wrong! Please try again later.\";\r\n\r\n    fetch(process.env.REACT_APP_API_ENDPOINT+ \"/users/login\", {\r\n      method: \"POST\",\r\n      credentials: \"include\",\r\n      headers:{\"Content-Type\":\"application/json\"},\r\n      body: JSON.stringify({email: email, password: password})\r\n    })\r\n    .then(async response => {\r\n      setIsSubmitting(false);\r\n      if(!response.ok){\r\n        if(response.status === 400){\r\n          setError(\"Please fill out all fields correctly.\");\r\n        }\r\n        else if(response.status === 401){\r\n          setError(\"Invalid email and/or password combination\");\r\n        }\r\n        else {\r\n          setError(errorMessage);\r\n        }\r\n      }\r\n\r\n      else{\r\n        const data = await response.json();\r\n        setUserContext(oldUserValues => {\r\n          return {...oldUserValues, token:data.token};\r\n        });\r\n        history.push(\"/movies\");\r\n        console.log(userContext);\r\n      }\r\n    })\r\n    .catch(e =>{\r\n      setIsSubmitting(false);\r\n      setError(errorMessage);\r\n    });\r\n  }\r\n\r\n\r\n  return(\r\n    <div className=\"container-fluid pt-5 pb-5 pr-5 pl-5\">\r\n      {error && <div className=\"alert alert-danger\">{error}</div>}\r\n      <div className=\"row d-flex justify-content-center align-items-center\">\r\n        <div className=\"col-md-6\">\r\n          <img className=\"img-fluid\" src=\"https://images.unsplash.com/photo-1517604931442-7e0c8ed2963c?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1050&q=80\"/>\r\n\r\n        </div>\r\n        <div className=\"col-md-6 justify-content-center\">\r\n        <h1 className=\"text-center pb-3\">Please turn off your cell phone...</h1>\r\n          <form className=\"\" onSubmit={formSubmitHandler}>\r\n            <input\r\n              className=\"form-control mb-4\"\r\n              id=\"email\"\r\n              placeholder=\"Email\"\r\n              type=\"email\"\r\n              value={email}\r\n              onChange={e => setEmail(e.target.value)}\r\n            />\r\n            <input\r\n              className=\"form-control mb-4\"\r\n              id=\"password\"\r\n              placeholder=\"Password\"\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={e => setPassword(e.target.value)}\r\n            />\r\n            <button\r\n            className=\"btn btn-primary btn-lg\"\r\n            type=\"submit\"\r\n            disabled={isSubmitting}\r\n            >{`${isSubmitting ? \"Logging In\" : \"Login\"}`}</button>\r\n          </form>\r\n          <h3 className=\"text-center pb-3\">... unless that&apos;s what you&apos;re using to view this page!</h3>\r\n          <p className=\"small fw-bold mt-2 pt-1 mb-0\">Don&apos;t have an account? <Link to=\"/register\" className=\"link-danger\">Register</Link></p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}